import com.android.ddmlib.DdmPreferences

apply plugin: 'com.android.application'

apply from: "$rootDir/gradle/android.gradle"

android {
    defaultConfig {
        applicationId 'com.example.dexopener'
        minSdkVersion 16
        targetSdkVersion 26
        versionCode 1
        versionName version
        testInstrumentationRunner 'com.github.tmurakami.dexopener.DexOpenerAndroidJUnitRunner'
        // Since Android 4.4, several classes under the package `com.android.dex` are now included
        // in the Android system, but on Android 4.4, some of them are incompatible with
        // `libcore-dex` on which `mockito-android` relies. As a result,
        // IncompatibleClassChangeError occurs while loading `DexIndexOverflowException`, so we
        // filter out it from the classes to be scanned by AndroidJUnitRunner, as shown below.
        testInstrumentationRunnerArguments.notClass = 'com.android.dex.DexIndexOverflowException'
    }
    buildTypes.debug.testCoverageEnabled true
    DdmPreferences.setTimeOut 60000
}

dependencies {
    androidTestCompile deps.dexopener
    androidTestCompile deps.rules
    androidTestCompile deps.mockito_android
}
